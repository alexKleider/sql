
-- Data Base Schema  Feb 16, 2023
-- AKA Entity Relationship Diagram (ERD)
                                         

DROP TABLE IF EXISTS People;             DROP TABLE IF EXISTS Attrition;
CREATE TABLE People ( -- AS P            --keeping data in People table
    personID INTEGER PRIMARY KEY,        CREATE TABLE Attrition ( -- AS At
    first TEXT NOT NULL,                     attritionID INTEGER PRIMARY KEY,
    last TEXT NOT NULL,                      personID INTEGER NOT NULL,
    suffix TEXT DEFAULT '',                  -- foreign key
    phone TEXT DEFAULT '',                   date TEXT DEFAULT '',
    address TEXT DEFAULT '',                 reason TEXT DEFAULT ''
    town TEXT DEFAULT '',                    );
    state TEXT DEFAULT '',               
    postal_code TEXT DEFAULT '',         DROP TABLE IF EXISTS Dues;
    country TEXT DEFAULT 'USA',          CREATE TABLE Dues ( -- AS Du
    email TEXT DEFAULT ''                    personID INTEGER UNIQUE NOT NULL,
    );                                       -- foreign key
                                             -- only one entry per person
DROP TABLE IF EXISTS Applicants;             dues_owed NUMERIC DEFAULT 100
-- also in Stati table                       );
-- unitil > member                       
CREATE TABLE Applicants ( -- AS Ap       DROP TABLE IF EXISTS Dock_Privileges;
    applicantID INTEGER PRIMARY KEY,     CREATE TABLE Dock_Privileges ( -- AS Do
    personID INTEGER NOT NULL UNIQUE,        personID TEXT NOT NULL UNIQUE,
        --foreign key                        --no one will pay for >1
    app_rcvd TEXT NOT NULL,                  --so no need for an
    fee_rcvd TEXT DEFAULT '',                --auto generated PRIMARY KEY
    meeting1 TEXT DEFAULT '',                cost NUMERIC DEFAULT 75
    meeting2 TEXT DEFAULT '',                );
    meeting3 TEXT DEFAULT '',            
    approved TEXT DEFAULT '',            DROP TABLE IF EXISTS Kayak_Slots;
    inducted TEXT DEFAULT '',            CREATE TABLE Kayak_Slots ( -- AS K
    dues_paid TEXT DEFAULT ''                slotID INTEGER PRIMARY KEY,
    );                                       slot_code TEXT NOT NULL UNIQUE,
                                             slot_cost NUMERIC DEFAULT 70,
DROP TABLE IF EXISTS Sponsors;               personID TEXT
--intersection table                         -- foreign key
CREATE TABLE Sponsors ( -- AS Sp             -- unlikely but theoretically
    personID INTEGER NOT NULL,               -- possible for one member to
    sponsorID INTEGER NOT NULL,              -- have >1 kayak slot.
    PRIMARY KEY (personID, sponsorID)        );
    -- composite primary key             
    );                                   DROP TABLE IF EXISTS Moorings;
                                         CREATE TABLE Moorings ( -- AS M
DROP TABLE IF EXISTS Stati;                  mooringID INTEGER PRIMARY KEY,
CREATE TABLE Stati ( -- AS St                mooring_code TEXT NOT NULL UNIQUE,
    statusID INTEGER PRIMARY KEY,            mooring_cost NUMERIC DEFAULT 0,
    key TEXT NOT NULL,                       personID TEXT
    text TEXT NOT NULL                       -- foreign key
    );                                       -- unlikely but theoretically
                                             -- possible for one member to
DROP TABLE IF EXISTS Person_Status;          -- have >1 mooring.
--intersection table                         );
CREATE TABLE Person_Status ( -- AS PS    
    personID INTEGER NOT NULL,           
    statusID INTEGER NOT NULL,           
    PRIMARY Key (personID, statusID)     
    -- composite primary key             
    );                                   